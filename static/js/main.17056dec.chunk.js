(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,a){e.exports=a(31)},30:function(e,t,a){},31:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(13),l=a.n(s),c=a(15),u=a(7),i=a(8),o=a.n(i),d=a(9),h=a(1),m=a(2),b=a(5),v=a(3),p=a(4),f=a(6),S=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).displayThread=function(e){var t=e.target.getAttribute("data-index"),n=a.props.subreddit.data.children,r=n[t].data.selftext_html,s=a.map_convert(r.toString());a.props.specThreadChange(s),a.props.CurrentActiveThreadObject(a.activeThreadObject(n[t].data)),a.props.displayUI("threadView")},a.activeThreadObject=function(e){var t=e.id,a=e.title,n=e.url,r=[];return r.push(t),r.push(a),r.push(n),r},a.map_convert=function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},a.displayThread=a.displayThread.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return this.props.subreddit.data.children.map(function(t,a){var n=t.data;return r.a.createElement("li",{key:a},r.a.createElement("a",{href:"#","data-index":a,className:n.name,onClick:e.displayThread},n.title))})}}]),t}(r.a.Component),T=function(e){return r.a.createElement("div",{className:"pagination"},r.a.createElement("a",{href:"#!",onClick:e.nextPage},"Load Next"))},g=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).handleInputValue=function(e){var t=e.target.value;a.setState({inputText:t})},a.handlePressEnter=function(e){e.target.value;"Enter"===e.key&&(a.props.searchSub(a.state.inputText),a.props.addSub(a.state.inputText),a.setState({inputText:""}))},a.handleClick=function(){a.props.searchSub(a.state.inputText),a.props.addSub(a.state.inputText),a.setState({inputText:""})},a.state={inputText:""},a.handlePressEnter=a.handlePressEnter.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"searchArea"},r.a.createElement("h4",{className:"title"},"Search a Subreddit"),r.a.createElement("div",{className:"searchField"},r.a.createElement("input",{value:this.state.inputText,onChange:this.handleInputValue})),r.a.createElement("button",{className:"smpl_btn",onClick:this.handleClick},"Find"))}}]),t}(r.a.Component),E=a(14),O=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(b.a)(this,Object(v.a)(t).call(this))).handleButtonPress=e.handleButtonPress.bind(Object(f.a)(e)),e.handleButtonRelease=e.handleButtonRelease.bind(Object(f.a)(e)),e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"handleButtonPress",value:function(e){var t=this;this.buttonPressTimer=setTimeout(function(){return t.props.removeSub(e)},1500)}},{key:"handleButtonRelease",value:function(e){clearTimeout(this.buttonPressTimer)}},{key:"render",value:function(){var e=this,t=this.props.displaySubs;return r.a.createElement("div",{className:"bookmark_subs"},r.a.createElement("ul",null,t.map(function(t){return r.a.createElement("li",{key:t},r.a.createElement("button",{onClick:function(){e.props.searchSub(t)},onTouchStart:function(){e.handleButtonPress(t)},onTouchEnd:function(){e.handleButtonRelease(t)},onMouseDown:function(){e.handleButtonPress(t)},onMouseUp:function(){e.handleButtonRelease(t)},onMouseLeave:function(){e.handleButtonRelease(t)}},"undefined"!==typeof t?"r/"+t:""))})),r.a.createElement("div",{className:"subDesc"},r.a.createElement("small",null,"Longpress to remove sub")))}}]),t}(r.a.Component),j=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(b.a)(this,Object(v.a)(t).call(this))).handleToggle=function(){document.querySelector(".toggle-slider").classList.toggle("closed"),document.querySelector(".menu-toggle a .fa").classList.contains("fa-angle-double-down")?(document.querySelector(".menu-toggle a .fa").classList.remove("fa-angle-double-down"),document.querySelector(".menu-toggle a .fa").classList.add("fa-angle-double-up")):(document.querySelector(".menu-toggle a .fa").classList.remove("fa-angle-double-up"),document.querySelector(".menu-toggle a .fa").classList.add("fa-angle-double-down"))},e.handleClick=function(t){var a=t.currentTarget.className;e.props.displayUI(a),e.handleToggle()},e.handleClick=e.handleClick.bind(Object(f.a)(e)),e}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"menuContainer"},r.a.createElement("div",{className:"menu toggle-slider closed"},r.a.createElement("ul",null,r.a.createElement("a",{href:"#",onClick:this.handleClick,className:"search"},r.a.createElement("li",null,r.a.createElement("i",{className:"fa fa-search"}))),r.a.createElement("a",{href:"#",onClick:this.handleClick,className:"home"},r.a.createElement("li",null,"Home")),r.a.createElement("a",{href:"#",onClick:this.handleClick,className:"subreddits"},r.a.createElement("li",null,"Your Subreddits")),r.a.createElement("a",{href:"#",onClick:this.handleClick,className:"threads"},r.a.createElement("li",null,"Read Later")))),r.a.createElement("div",{className:"menu-toggle"},r.a.createElement("a",{href:"#",onClick:function(){e.handleToggle()}},r.a.createElement("i",{className:"fa fa-angle-double-down"}))))}}]),t}(r.a.Component),k=function(e){return r.a.createElement("a",{href:"#",className:"smpl_btn read_btn",onClick:e.handleReturnThread},"Back")},y=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).handleThreadClick=function(e){var t=e.target.dataset.url;a.fetchSavedThread(t)},a.renderSelfText=function(e){return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")},a.fetchSavedThread=function(){var e=Object(d.a)(o.a.mark(function e(t){var n,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(t,".json"));case 3:if((n=e.sent).ok){e.next=6;break}return e.abrupt("return","Thread can't be found!");case 6:return e.next=8,n.json();case 8:return r=e.sent,e.abrupt("return",a.setState({renderText:[].concat(Object(u.a)(a.state.renderText),[r[0].data.children[0].data])}));case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return","Thread can't be found!");case 15:case"end":return e.stop()}},e,null,[[0,12]])}));return function(t){return e.apply(this,arguments)}}(),a.handleReturnThread=function(){a.setState({renderText:""})},a.state={renderText:[]},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"handleButtonPress",value:function(e){var t=this;this.buttonPressTimer=setTimeout(function(){return t.props.removeSaveThread(e)},1500)}},{key:"handleButtonRelease",value:function(e){clearTimeout(this.buttonPressTimer)}},{key:"render",value:function(){var e,t=this,a=this.props.savedThread,n="";return e=null!=a&&0!=a.length?a.map(function(e,a){return r.a.createElement("li",{key:e.threadObject.id},r.a.createElement("button",{"data-url":e.threadObject.url,onClick:t.handleThreadClick,onTouchStart:function(){t.handleButtonPress(a)},onTouchEnd:function(){t.handleButtonRelease(a)},onMouseDown:function(){t.handleButtonPress(a)},onMouseUp:function(){t.handleButtonRelease(a)},onMouseLeave:function(){t.handleButtonRelease(a)}},e.threadObject.title))}):r.a.createElement("div",null,r.a.createElement("p",null,"No saved thread.")),n=""!=this.state.renderText?r.a.createElement("div",null,r.a.createElement("div",{className:"activeSub"},r.a.createElement("h3",null,this.state.renderText[0].title)),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.renderSelfText(this.state.renderText[0].selftext_html)}}),r.a.createElement(k,{handleReturnThread:this.handleReturnThread})):r.a.createElement("div",null,r.a.createElement("div",{className:"activeSub"},r.a.createElement("h3",null,"Save threads")),r.a.createElement("div",{className:"bookmark_subs"},r.a.createElement("ul",null,e),r.a.createElement("div",{className:"subDesc"},r.a.createElement("small",null,"Longpress to remove thread.")))),r.a.createElement("div",null,n)}}]),t}(r.a.Component),C=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).handleClick=function(e){e.preventDefault(),a.props.SaveThread(a.props.singleThreadDetails),a.setState({saveThread:"yes"})},a.state={saveThread:"no"},a.handleClick=a.handleClick.bind(Object(f.a)(a)),a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e="yes"==this.state.saveThread?"smpl_btn simpl_btn_invert":"smpl_btn read_btn",t="yes"==this.state.saveThread?"Saved":"Read Later";return r.a.createElement("a",{href:"#",onClick:this.handleClick,className:e},t)}}]),t}(r.a.Component),N=function(e){return r.a.createElement("a",{href:"#",className:"smpl_btn read_btn",onClick:e.returnListing},"Back")},x=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(b.a)(this,Object(v.a)(t).call(this,e))).fetchPosts=function(){var e=Object(d.a)(o.a.mark(function e(t){var n,r,s,l=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:"",e.prev=1,e.next=4,fetch("https://www.reddit.com/r/".concat(t,"/hot.json?limit=10&count=5").concat(n));case 4:if((r=e.sent).ok){e.next=7;break}return e.abrupt("return",a.handleFetchError(r.statusText));case 7:return e.next=9,r.json();case 9:return s=e.sent,e.abrupt("return",a.setState({subreddit:s}));case 13:return e.prev=13,e.t0=e.catch(1),e.abrupt("return",a.handleFetchError(e.t0));case 16:case"end":return e.stop()}},e,null,[[1,13]])}));return function(t){return e.apply(this,arguments)}}(),a.handleFetchError=function(e){alert("An error ocurred. That subreddit probably doesn't exist. Reverting to r/TalesFromTechSupport"),a.searchSub("TalesFromTechSupport");var t=a.state.savedSub;a.setState({savedSub:a.state.savedSub.map(function(e,a){if(t.length-1!==a)return e})}),a.setState(a.state)},a.nextPage=function(){var e=a.state.subreddit.data.after;return a.fetchPosts(a.state.currentSub,"&after=".concat(e))},a.specThreadChange=function(e){a.setState({singleThread:e})},a.returnListing=function(){a.setState({singleThread:""}),a.setState({menuStatus:"home"})},a.searchSub=function(e){a.setState({currentSub:e}),a.fetchPosts(e),a.setState({menuStatus:"home"})},a.addSub=function(e){a.setState({savedSub:[].concat(Object(u.a)(a.state.savedSub),[e])});var t=[].concat(Object(u.a)(a.state.savedSub),[e]);localStorage.setItem("localSub",JSON.stringify(t))},a.removeSub=function(e){var t=a.state.savedSub;a.setState({savedSub:t.filter(function(t){return t!==e})}),localStorage.setItem("localSub",JSON.stringify(a.state.savedSub))},a.SaveThread=function(e){a.setState({savedThread:[].concat(Object(u.a)(a.state.savedThread),[e])});var t=[].concat(Object(u.a)(a.state.savedThread),[e]);localStorage.setItem("savedThread",JSON.stringify(t))},a.CurrentActiveThreadObject=function(e){var t=new Object;t.id=e[0],t.title=e[1],t.url=e[2],a.setState({singleThreadDetails:Object(c.a)({},a.state.singleThreadDetails,{threadObject:t})})},a.removeSaveThread=function(e){JSON.parse(localStorage.getItem("savedThread"));var t=a.state.savedThread,n=e,r=t.filter(function(e,t){return console.log(t),t!==n});localStorage.setItem("savedThread",JSON.stringify(r)),a.setState({savedThread:r})},a.displayUI=function(e){a.setState({menuStatus:e})},a.state={subreddit:"",singleThread:"",currentSub:"TalesFromTechSupport",savedSub:[],menuStatus:"home",savedThread:[],singleThreadDetails:{}},a}return Object(p.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this.state.currentSub;this.fetchPosts(e);var t=JSON.parse(localStorage.getItem("localSub")),a=JSON.parse(localStorage.getItem("savedThread"));null===localStorage.getItem("localSub")?this.setState({savedSub:["TalesFromTechSupport","MaliciousCompliance","IDontWorkHereLady"]}):this.setState({savedSub:t}),null!==localStorage.getItem("localSub")&&this.setState({savedThread:a})}},{key:"render",value:function(){if(this.state.subreddit){this.state.singleThread;var e,t=this.state.menuStatus;switch(t){case"home":e=r.a.createElement("div",null,r.a.createElement("div",{className:"activeSub"},r.a.createElement("h3",null,"r/"+this.state.currentSub)),r.a.createElement("ul",{className:"listings"},r.a.createElement(S,{subreddit:this.state.subreddit,specThreadChange:this.specThreadChange,displayUI:this.displayUI,CurrentActiveThreadObject:this.CurrentActiveThreadObject})),r.a.createElement(T,{nextPage:this.nextPage}));break;case"search":e=r.a.createElement(g,{searchSub:this.searchSub,addSub:this.addSub});break;case"subreddits":e=r.a.createElement(O,{searchSub:this.searchSub,displaySubs:this.state.savedSub,removeSub:this.removeSub});break;case"threadView":e=r.a.createElement("div",{className:"single_thread"},r.a.createElement("div",{className:"activeSub"},r.a.createElement("h3",null,this.state.singleThreadDetails.threadObject.title)),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.singleThread}}),r.a.createElement(N,{returnListing:this.returnListing}),r.a.createElement(C,{menuStatus:t,SaveThread:this.SaveThread,singleThreadDetails:this.state.singleThreadDetails}));break;case"threads":e=r.a.createElement(y,{savedThread:this.state.savedThread,removeSaveThread:this.removeSaveThread})}return r.a.createElement("div",{className:"container"},r.a.createElement(E.Helmet,null,r.a.createElement("title",null,"SimplyReddit")),r.a.createElement(j,{displayUI:this.displayUI}),e)}return null}}]),t}(r.a.Component);a(30),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.17056dec.chunk.js.map